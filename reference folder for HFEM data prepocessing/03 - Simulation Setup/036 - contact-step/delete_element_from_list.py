from abaqus import *
from abaqusConstants import *
from caeModules import *
from driverUtils import executeOnCaeStartup

from abaqus import getInputs
from abaqus import getInput
from abaqus import getWarningReply, YES, NO

def main():

	#============ setting variable names =================
	model_name = mdb.models.keys()[-1]
	part_name = mdb.models[model_name].parts.keys()[-1]
	# Count the total number of elements in the part
	total_initial_elements = len(mdb.models[model_name].parts[part_name].elements)

	#============ defining elements to delete =================
	element_list_1 = [480402, 463446, 383611, 308945, 228026, 198327, 502528, 459155, 469389, 464074, 409782, 370331, 241926, 167309, 181987, 229084, 509740, 96300, 352981, 361564, 205969, 423553, 467150, 457396, 285518, 152120, 327870, 462970, 519639, 208532, 430789, 279268, 439164, 345772, 336295, 271972, 449511, 340005, 505529, 336723, 518569, 184095, 188751, 392588, 438721, 233140, 233606, 446546, 291265, 415455, 290962, 425052, 494927, 420848, 205608, 370015, 371967, 438754, 91021, 378332, 187919, 398397, 429252, 429252, 283446, 519111, 511869, 500940, 219915, 484692, 380904, 141071, 423593, 423593, 427509, 220417, 448873, 102936, 267592, 446166, 393809, 144262, 290763, 177610, 387635, 395677, 374835, 466319, 479718, 428018, 441597, 233655, 132485, 475316, 507649, 195404, 378906, 382118, 356701, 443255, 378731, 476339, 405252, 202243, 395952, 460444, 361530, 392398, 403810, 477166, 208611, 380006, 442720, 128943, 122551, 460984, 420346, 443255, 434625, 460358, 502298, 519278, 444685, 406480, 299459, 225054, 388886, 442869, 190915, 481041, 403357, 419514, 475707, 103195, 289624, 162647, 354164, 166388, 476337, 137205, 403810, 279465, 347176, 205267, 677347, 219915, 30762, 348768, 442116, 136629, 90600, 396721, 128073, 205914, 486177, 389249, 366409, 380166, 459053, 420172, 670976, 484722, 261767, 503777, 181573, 400332, 224786, 345624, 130813, 347144, 89603, 505231, 363147, 519785, 454316, 115456, 345625, 469722, 458646, 486964, 475085, 475236, 501734, 401632, 368436, 348218, 145339, 509564, 406641, 444189, 163223, 213160, 398873, 353094, 227365, 253584, 360907, 501851, 287003, 159354, 148597, 506685, 10598, 431411, 332900, 487774, 470386, 296322, 23330, 101970, 502337, 465260, 487601, 200945, 399339, 470546, 503785, 435170, 146929, 126267, 400330, 461458, 184362, 429529, 286883, 356024, 353359, 400891, 288485, 374360, 128073, 126267, 383873, 93142, 121868, 181222, 303791, 408646, 336930, 477933, 268531, 458421, 442787, 447843, 431841, 434084, 392698, 243982, 265811, 94441, 353156, 190441, 141829, 161152, 449511, 499584, 163223, 419498, 419498, 271632, 395637, 287090, 487330, 358604, 180214, 517605, 301574, 420175, 470678, 258691, 389619, 94349, 378602, 492129, 436876, 511395, 449511, 446643, 37967, 457413, 395980, 312922, 470834, 120981, 395902, 403322, 242369, 261803, 370331, 231184, 388458, 496909, 395741, 91293, 513601, 350532, 393723, 294659, 302307, 315195, 149947, 335134, 293531, 123172, 205300, 290551, 489113, 321922, 293864, 423556, 203683, 137921, 359061, 274177, 419498, 226074, 513906, 257527, 233649, 489931, 393677, 188733, 367099, 508769, 439882, 103195, 177082, 419319, 274986, 468076, 291594, 505879, 148898, 391186, 491920, 282617, 124346, 371895, 361288, 443255, 273512, 114357, 499608, 126052, 415688, 516592, 451580, 362084, 255799, 100624, 509737, 462198, 442868, 388046, 458197, 453627, 503514, 453922, 423058, 285782, 364796, 442868, 502362, 442830, 234122, 399815, 184331, 121752, 127920, 94349, 372857, 204536, 509181, 321545, 467037, 377084, 335576, 284896, 485282, 98813, 281448, 400454, 428018, 422135, 469724, 431411, 457652, 368357, 389609, 395960, 441437, 509422, 389728, 422970, 124080, 335040, 509353, 386723, 454352, 312469, 111217, 262907, 457397, 457396, 450127, 335800, 335800, 335800, 285782, 351135, 512662, 366647, 369212, 121181, 318426, 396499, 509709, 214779, 274930, 335174, 227184, 444681, 509354, 359834, 448893, 452143, 421255, 171335, 289624, 510064, 170790, 338104, 436923, 361543, 430682, 423619, 484276, 322045, 331893, 437416, 359061, 363798, 447029, 423499, 359061, 444685, 117291, 330572, 450615, 353156, 299483, 219243, 353156, 96445, 103195, 459715, 145350, 145350, 381588, 129821, 290764, 307569]
	element_tuple_1 = tuple(element_list_1)

	element_list_2 = [311281, 483201, 16071, 169535, 184605, 265231, 501382, 259928, 110591, 270446, 470098, 366654, 212592, 302809, 515117, 171880, 287821, 384629, 508240, 474113, 124791, 489267, 489266, 489311, 339855, 302024, 461250, 229303, 495254, 315195, 712921, 205956, 309416, 420192, 212848, 290961, 301849, 227874, 309270, 229729, 159741, 180758, 166665, 309204, 224893, 277441, 255146, 144882, 445611, 490029, 17580, 310255, 25081, 168166, 144654, 388115, 438119, 259211, 429740, 331442, 302531, 270775, 391122, 205282, 431248, 439618, 104065, 348760, 171067, 317501, 423499, 416369, 344, 416460, 210367, 344026, 38531, 274869, 415917, 326304, 188233, 460905, 234232, 366662, 176481, 456678, 461313, 163422, 284961, 188733, 437849, 351757, 328803, 31361, 22704, 395372, 376860, 29455, 102225, 332231, 8272, 45929, 347744, 96445, 226089, 202893, 490146, 430084, 336719, 268092, 159707, 336720, 426807, 509555, 439601, 509559, 512776, 167580, 14620, 176481, 162672, 12054, 378567, 244054, 376419, 272093, 332268, 382767, 182067, 303528, 480806, 744520, 480788, 412869, 205881, 47589, 370544, 306291, 302531, 464075, 509553, 509541, 493963, 18397, 337698, 432243, 509542, 500666, 120914, 128073, 235574, 235320, 495252, 119415, 292671, 460395, 221166, 249533, 181397, 188590, 422195, 38675, 20908, 186681, 343251, 408370, 420546, 10743, 348993, 120162, 411316, 265664, 287782, 225127, 238409, 440723, 450127, 245963, 99821, 167438, 204522, 480567, 97342, 464161, 274177, 219301, 321492, 152635, 369143, 266819, 463135, 350464, 263344, 494583, 505802, 425182, 168017, 170560, 479718, 128387, 213117, 30947, 261584, 371895, 494422, 277100, 280995, 267458, 364792, 383282, 24022, 498844, 509390, 509409, 260796, 509455, 295900, 2169, 517533, 410566, 223384, 227034, 397199, 99332, 285181, 112402, 289645, 451829, 195404, 314765, 262158, 175466, 184362, 340771, 102000, 230377, 151989, 163188, 331861, 279139, 333822, 462817, 341777, 281591, 281591, 457359, 512380, 246951, 94300, 505802, 372158, 39864, 192824, 215645, 457398, 161583, 388272, 186672, 297095, 334365, 149129, 198248, 228687, 517275, 305717, 320822, 290763, 366937, 487315, 1666, 266221, 408089, 454961, 212373, 273785, 198048, 466953, 419671, 243315, 193362, 33561, 242340, 507649, 357052, 431508, 436967, 509443, 334364, 461045, 439634, 314571, 220137, 7799, 30375, 134945, 403579, 235240, 334361, 421100, 219645, 493270, 118058, 16872, 28121, 230236, 281963, 26844, 464917, 430798, 404295, 3515, 419514, 186845, 407520, 328720, 17290, 92683, 403833, 209092, 209092, 233606, 506315, 430855, 253961, 19390, 202429, 318450, 89475, 268516, 318143, 451849, 244251, 314665, 260810, 42532, 372446, 326109, 453891, 503233, 317650, 13113, 369176, 112518, 112518, 485234, 493853, 307289, 342992, 120205, 2518, 517059, 637583, 108851, 36029, 225503, 147543, 226668, 155032, 376494, 45799, 509346, 21589, 397197, 326482, 426473, 292838, 320013, 18080, 8896, 122551, 32349, 460243, 426473, 88891, 384851, 224473, 321896, 380326, 400243, 429296, 123363, 218554, 257187, 194555, 361975, 387285, 196068, 354474, 216811, 451718, 124750, 128285, 146756, 317677, 291892, 101159, 25699, 329817, 432737, 159094, 349359, 154361, 191406, 281741, 284950, 366250, 344775, 344790, 248223, 33291, 489615, 272059, 500694, 19264, 183405, 375824, 255694, 96755, 276434, 423619, 510241, 404766, 256672, 346184, 156413, 46449, 677142, 484252, 469508, 315211, 325649, 114513, 192824, 161263, 131117, 406068, 457332, 428160, 413280, 185754, 210164, 2996, 447582, 394372, 494429, 335815, 28097, 512662, 201794, 369222, 28508, 462895, 372574, 23448, 184133, 369215, 417937, 41384, 167062, 423336, 31382, 414072, 181926, 35023, 255981, 461288, 489716, 138431, 479951, 23883, 490786, 244437, 39004, 396799, 181222, 176856, 495958, 264450, 193100, 520604, 342414, 389619, 389619, 123623, 138957, 349265, 198428, 185914, 453636, 370432, 251865, 355637, 315938, 337373, 437063, 417101, 471161, 321193, 163120, 456871, 190790, 289607, 453627, 512914, 482710, 136553, 444394, 158808, 419263, 210059, 167869, 299987, 331699, 475233, 467150, 509353, 398864, 360569, 360607, 369215, 167235, 432455, 475235, 437078, 475237, 219732, 166330, 387623, 173524, 114835, 128863, 406668, 147215, 163265, 353724, 34890, 519386, 30669, 289192, 506699, 321794, 346967, 21205, 96755, 506882, 272425, 432349, 438795, 284575, 213361, 288645, 237925, 194534, 428567, 428566, 376296, 315595, 505887, 474545, 228134, 311524, 356392, 144742, 266344, 278994, 188217, 415683, 473547, 487600, 159354, 278605, 432439, 388837, 154713, 154316, 442084, 361666, 250575, 149645, 503375, 364649, 380904, 363441, 316750, 45162, 217235, 117679, 289772, 406314, 10087, 130825, 170498, 349353, 435411, 484224, 46230, 272268, 231267, 293275, 32877, 461310, 349124, 272008, 364157, 401971, 401976, 148069, 260429, 515544, 385095, 172574, 400956, 372137, 184767, 165955, 9942, 390298, 204106, 364186, 467525, 113393, 435684, 379790, 466743, 392739, 297406, 297652, 286934, 114097, 357894, 452791, 482715, 470273, 507114, 293480, 187010, 180221, 490820, 249186, 121826, 452695, 509262, 370590, 115632, 227794, 201796, 435136, 278859, 218452, 277045, 363947, 770463, 459876, 457084, 418020, 354378, 427999, 401860, 255239, 155035, 108018, 358489, 186466, 344775, 400820, 281286, 318941, 289681, 400454, 310820, 385095, 519111, 399812, 266824, 171171, 195805, 421458, 193899, 183852, 290961, 112253, 330921, 106979, 385300, 34566, 364881, 266888, 250795, 286835, 513172, 412513, 307126, 211105, 363542, 352981, 432402, 269887, 39182, 400332, 503320, 513081, 190981, 21778, 431159, 392409, 503711, 193616, 110122, 277950, 38366, 398876, 277065, 459915, 507394, 457331, 500258, 153947, 213961, 402443, 177678, 439761, 173130, 491920, 215757, 272044, 464148, 105559, 305768, 184362, 157622, 419096, 178124, 363657, 239272, 151911, 512769, 160145, 104319, 301919, 181154, 447029, 447099, 348769, 214961, 424354, 158139, 184555, 337754, 410793, 451165, 225634, 249186, 487702, 274527, 144135, 12712, 176951, 172138, 172138, 489938, 266723, 487712, 278263, 507356, 268609, 198327, 102910, 334232, 166392, 250804, 456161, 447565, 338776, 251317, 270775, 472720, 18180, 369633, 391530, 251195, 443134, 46946, 461580, 166392, 514861, 507193, 421750, 120982, 272569, 449782, 163245, 499589, 34291, 509632, 501891, 400660, 230260, 294063, 90086, 266389, 317678, 359906, 128277, 354696, 95812, 95812, 392913, 227365, 468830, 237521, 32480, 45670, 442884, 395572, 99762, 395722, 327778, 497930, 214593, 106528, 102815, 377082, 238443, 129942, 472708, 34222, 181905, 348611, 123742, 462284, 174573, 509709, 112306, 228945, 22939, 238754, 325816, 513071, 447809, 313912, 451153, 345352, 394231, 300612, 419454, 337198, 327210, 327209, 420175, 478933, 391932, 142855, 383522, 248270, 294430, 226176, 126139, 407148, 494212, 398873, 176472, 319482, 219940, 306577, 457191, 286883, 329681, 401626, 277845, 494092, 858253, 331639, 211019, 514242, 500122, 501277, 459911, 130011, 420767, 253574, 197310, 235160, 230423, 366656, 479438, 107568, 513601, 211019, 359304, 170448, 301094, 340041, 301094, 329988, 181154, 144539, 395940, 36999, 280642, 177335, 194466, 458302, 175466, 211462, 286747, 436626, 395902, 217181, 289371, 497785, 128509, 45363, 212508, 265877, 513645, 450793, 405216, 395929, 329843, 450947, 493967, 156850, 275982, 263112, 263003, 380430, 210049, 216890, 297935, 442313, 469815, 295888, 423311, 501395, 508072, 423515, 176525, 231246, 461499, 498845, 415215, 375409, 181369, 433774, 360184, 507247, 516437, 154779, 334650, 349538, 470386, 29687, 16317, 91930, 409515, 374360, 350397, 450914, 215658, 364797, 15097, 420848, 121876, 381597, 461959, 234286, 314337, 231547, 290764, 126615, 229502, 92637, 368370, 255788, 235083, 182573, 313543, 422137, 137734, 335134, 215240, 403279, 196806, 31626, 423547, 473611, 225901, 253634, 423562, 259507, 412751, 342780, 439162, 242951, 318700, 187986, 393809, 43146, 194331, 200601, 288892, 336183, 38450, 131117, 518359, 439152, 255646, 99197, 450615, 115712, 174294, 459941, 248390, 431730, 320593, 334394, 8678, 22301, 463135, 372163, 157535, 239414, 14316, 278721, 18454, 149658, 258227, 230684, 343794, 460409, 334353, 331550, 230941, 429393, 109364, 509312, 94099, 378326, 483066, 162165, 354064]
	element_tuple_2 = tuple(element_list_2)


	#=========================================================================================================================
	#====================================================== list 1 ===========================================================
	#=========================================================================================================================

	#============ vizualiation of elements to delete =================
	session.viewports['Viewport: 1'].setValues(displayedObject=mdb.models[model_name].parts[part_name])
	leaf = dgm.LeafFromPartElementLabels(part=mdb.models[model_name].parts[part_name], elementLabels=element_tuple_1)
	dg = session.DisplayGroup(leaf=leaf, name='DisplayGroup-elements_to_delete')
	dg1= session.displayGroups['DisplayGroup-elements_to_delete']
	session.viewports['Viewport: 1'].partDisplay.setValues(visibleDisplayGroups=(
	    dg1, ))

	reply = getWarningReply(message='Okay to continue?', buttons=(YES,NO))
	if reply == NO:
	    print("deletion cancelled")
	    return

	del dg
	session.viewports['Viewport: 1'].setValues(displayedObject=mdb.models[model_name].parts[part_name])

	#============ deletion of elements =================
	print('deleting elements...')
	i=0
	for element in element_list_1:
		e = mdb.models[model_name].parts[part_name].elements[element-1:element]
		mdb.models[model_name].parts[part_name].deleteElement(elements=e)
		i+=1
		print(f"{int(i/len(element_list_1)*100)}% done")

	print('all done')

	total_final_elements = len(mdb.models[model_name].parts[part_name].elements)

	if total_initial_elements-total_final_elements == len(element_list_1):
		print(f"{len(element_list_1)} have been succesfully deleted")

	elif total_initial_elements-total_final_elements != len(element_list_1):
		print('!!!ERROR!!!')
		print(' ')
		print(f"{total_initial_elements-total_final_elements} have been deleted instead of {len(element_list_1)}")

	a = mdb.models[model_name].rootAssembly
	a.regenerate()


if __name__ == '__main__':
	print('CA MARCHE POAAAAAASSS')
    main()
	




